apiVersion: apps/v1
kind: "Deployment"
metadata:
   name: "fg-redis-persistor"
   labels:
      app: redis-point-persistor
spec:
   replicas: 1
   selector:
      matchLabels:
         app: redis-point-persistor
   template:
      metadata:
         labels:
            app: redis-point-persistor
      spec:
         containers:
            - name: fg-redis-persistor
              image: gcr.io/flight-globe/fg-redis-persistor
              imagePullPolicy: Always
              env:
                 - name: REDIS_ADDRESS
                   value: redis-master
                 - name: REDIS_PORT
                   value: "6379"
                 - name: RABBITMQ_HOST
                   value: rabbitmq
                 - name: RABBITMQ_PORT
                   value: "5672"
              livenessProbe:
                exec:
                  command:
                    - /var/flightglobe/liveness.sh
                initialDelaySeconds: 45
                periodSeconds: 40
                failureThreshold: 1
              readinessProbe:
                exec:
                  command:
                    - /var/flightglobe/readiness.sh
                initialDelaySeconds: 0
                periodSeconds: 10
                failureThreshold: 1
